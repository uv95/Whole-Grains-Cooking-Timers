{"ast":null,"code":"import _slicedToArray from\"/Users/ulana/grains-timer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import ButtonClose from'./ButtonClose';import ButtonStart from'./ButtonStart';import{useState,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TimerContainer(_ref){var onClick=_ref.onClick,name=_ref.name,grainsTime=_ref.grainsTime;var _useState=useState(\"\".concat(grainsTime.toString().padStart(2,'0'),\":00\")),_useState2=_slicedToArray(_useState,2),timeValue=_useState2[0],setTimeValue=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),dasharray=_useState4[0],setDasharray=_useState4[1];var _useState5=useState('START'),_useState6=_slicedToArray(_useState5,2),btnText=_useState6[0],setBtnText=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),hover=_useState8[0],setHover=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPlaying=_useState10[0],setIsPlaying=_useState10[1];var myRef=useRef();var playPause=function playPause(){isPlaying?myRef.current.pause():myRef.current.play();setIsPlaying(true);};var timeLeft={total:grainsTime*60,min:grainsTime,sec:0};var updateTimer=function updateTimer(){setTimeValue(\"\".concat(timeLeft.min.toString().padStart(2,'0'),\":\").concat(timeLeft.sec.toString().padStart(2,'0')));};var getTimeLeft=function getTimeLeft(end){var curTime=Date.parse(new Date());var difference=end-curTime;var _timeLeft=timeLeft,total=_timeLeft.total;total=difference/1000;var min=Math.trunc(total/60%60);var sec=total%60;return{total:total,min:min,sec:sec};};var handleStartTimer=function handleStartTimer(e){var end=Date.parse(new Date())+timeLeft.total*1000;setBtnText(\"Don't forget to stir!\");setHover(false);if(btnText===\"Don't forget to stir!\"||btnText===\"STOP\")return;var initialTotal=timeLeft.total;var interval=setInterval(function(){timeLeft=getTimeLeft(end);updateTimer();setDasharray((1-(timeLeft.total-1)/initialTotal)*283);if(timeLeft.total<=0){clearInterval(interval);setHover(true);playPause();setBtnText(\"STOP\");}},1000);};return/*#__PURE__*/_jsx(\"div\",{className:\"timer-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"timer-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsx(ButtonClose,{onClick:onClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-container__timer\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"timer-container__timer--circle\",viewBox:\"0 0 100 100\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"50\",r:\"45\"}),/*#__PURE__*/_jsx(\"path\",{strokeDasharray:dasharray+' 283',className:\"base-timer__path-remaining\",d:\" M 50, 50 m -45, 0 a 45,45 0 1,0 90,0 a 45,45 0 1,0 -90,0 \"})]}),/*#__PURE__*/_jsx(\"p\",{children:timeValue})]}),/*#__PURE__*/_jsx(ButtonStart,{hover:hover,onClick:btnText===\"STOP\"?onClick:handleStartTimer,text:btnText}),/*#__PURE__*/_jsx(\"audio\",{ref:myRef,src:\"timer.mp3\"}),/*#__PURE__*/_jsx(\"img\",{className:\"timer-container__img\",src:\"img/wheat-bg.svg\",alt:\"\"})]})});}export default TimerContainer;","map":{"version":3,"names":["React","ButtonClose","ButtonStart","useState","useRef","TimerContainer","onClick","name","grainsTime","toString","padStart","timeValue","setTimeValue","dasharray","setDasharray","btnText","setBtnText","hover","setHover","isPlaying","setIsPlaying","myRef","playPause","current","pause","play","timeLeft","total","min","sec","updateTimer","getTimeLeft","end","curTime","Date","parse","difference","Math","trunc","handleStartTimer","e","initialTotal","interval","setInterval","clearInterval"],"sources":["/Users/ulana/grains-timer/src/components/TimerContainer.jsx"],"sourcesContent":["import React from 'react';\nimport ButtonClose from './ButtonClose';\nimport ButtonStart from './ButtonStart';\nimport { useState, useRef } from 'react';\n\nfunction TimerContainer({ onClick, name, grainsTime }) {\n  const [timeValue, setTimeValue] = useState(\n    `${grainsTime.toString().padStart(2, '0')}:00`\n  );\n  const [dasharray, setDasharray] = useState(0);\n  const [btnText, setBtnText] = useState('START');\n  const [hover, setHover] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const myRef = useRef();\n\n  const playPause = function () {\n    isPlaying ? myRef.current.pause() : myRef.current.play();\n    setIsPlaying(true);\n  };\n\n  let timeLeft = {\n    total: grainsTime * 60,\n    min: grainsTime,\n    sec: 0,\n  };\n\n  const updateTimer = function () {\n    setTimeValue(\n      `${timeLeft.min.toString().padStart(2, '0')}:${timeLeft.sec\n        .toString()\n        .padStart(2, '0')}`\n    );\n  };\n\n  const getTimeLeft = function (end) {\n    const curTime = Date.parse(new Date());\n    const difference = end - curTime;\n    let { total } = timeLeft;\n    total = difference / 1000;\n\n    const min = Math.trunc((total / 60) % 60);\n    const sec = total % 60;\n\n    return {\n      total,\n      min,\n      sec,\n    };\n  };\n\n  const handleStartTimer = function (e) {\n    const end = Date.parse(new Date()) + timeLeft.total * 1000;\n    setBtnText(`Don't forget to stir!`);\n    setHover(false);\n    if (btnText === `Don't forget to stir!` || btnText === `STOP`) return;\n    const initialTotal = timeLeft.total;\n\n    const interval = setInterval(() => {\n      timeLeft = getTimeLeft(end);\n      updateTimer();\n      setDasharray((1 - (timeLeft.total - 1) / initialTotal) * 283);\n      if (timeLeft.total <= 0) {\n        clearInterval(interval);\n        setHover(true);\n        playPause();\n        setBtnText(`STOP`);\n      }\n    }, 1000);\n  };\n\n  return (\n    <div className=\"timer-overlay\">\n      <div className=\"timer-container\">\n        <h2>{name}</h2>\n        <ButtonClose onClick={onClick} />\n        <div className=\"timer-container__timer\">\n          <svg\n            className=\"timer-container__timer--circle\"\n            viewBox=\"0 0 100 100\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <circle cx=\"50\" cy=\"50\" r=\"45\" />\n            <path\n              strokeDasharray={dasharray + ' 283'}\n              className=\"base-timer__path-remaining\"\n              d=\"\n          M 50, 50\n          m -45, 0\n          a 45,45 0 1,0 90,0\n          a 45,45 0 1,0 -90,0\n        \"\n            ></path>\n          </svg>\n          <p>{timeValue}</p>\n        </div>\n        <ButtonStart\n          hover={hover}\n          onClick={btnText === `STOP` ? onClick : handleStartTimer}\n          text={btnText}\n        />\n        <audio ref={myRef} src=\"timer.mp3\"></audio>\n        <img className=\"timer-container__img\" src=\"img/wheat-bg.svg\" alt=\"\" />\n      </div>\n    </div>\n  );\n}\n\nexport default TimerContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}